# Linux Security Overview
Agora vamos tentar perceber com a ajuda do chat GPT o que era suposto eu saber com os powerpoints do stor. Esperemos que ele nos ajude!

---
### Processos
Um processo é uma instância de um programa em execução num sistema operativo.

1. **Programa em Execução (Running Program)**: Um processo é criado quando um programa é carregado na memória e começa a ser executado. Cada processo é uma entidade independente que executa um conjunto de instruções definido pelo seu programa. 

2. **Espaço de Endereço Isolado (Isolated Address Space)**: Cada processo tem o seu próprio espaço de endereços na memória, isolado dos outros processos. Isto significa que um processo não pode acessar diretamente a memória de outro processo, proporcionando segurança e estabilidade ao sistema, evitando que um processo afete a execução de outro.

3. **Executado sob um ID de Utilizador e Grupo (Executed under a User and Group ID)**: Quando um processo é iniciado, ele é executado com as permissões associadas a um utilizador e a um grupo específicos. Isto define os privilégios que o processo tem, como acesso a ficheiros e outros recursos do sistema.

4. **Utilizadores Reais ou Virtuais (Actual or Virtual Users)**: O conceito de utilizadores não se limita a utilizadores físicos. Existem utilizadores virtuais, como serviços de sistema, que também podem iniciar processos. Estes utilizadores virtuais são frequentemente utilizados para tarefas automáticas e serviços do sistema operativo.

5. **IDs de Utilizador e Grupo Reais ou Efetivos (Real or Effective User and Group IDs)**: Um processo tem IDs de utilizador e grupo reais, que correspondem ao utilizador e grupo que iniciaram o processo. Além disso, existem IDs de utilizador e grupo efetivos, que podem ser temporariamente modificados para conceder ao processo permissões adicionais durante a sua execução. Este mecanismo é usado, por exemplo, quando um programa precisa realizar uma tarefa que requer privilégios superiores temporariamente.

6. **Pode Gerar Outros Processos (May Spawn Other Processes)**: Um processo pode criar (ou "spawn") outros processos, chamados processos filho. Isto é feito através de chamadas de sistema como fork ou exec em sistemas Unix-like. Os processos filho são independentes, mas podem comunicar com o processo pai e herdam parte do contexto de execução, como variáveis de ambiente.

---

### Espaço de Endereços de um Processo
O espaço de endereços de um processo é uma área de memória atribuída a um programa em execução. Este espaço de endereços é organizado de maneira tradicional e **linear**, o que significa que é estruturado de forma sequencial. 

1. **Modelo Linear Tradicional**: O espaço de endereços é organizado de forma contínua, como uma linha reta, onde diferentes partes do programa são colocadas em posições específicas.

2. **Código, Dados e Stack**: 
O **código** é a parte do espaço de endereços onde o código executável do programa é armazenado. Fica geralmente na parte inferior do espaço de endereços.

Os **dados** são a seção contém variáveis e outras informações necessárias para a execução do programa. É dividida em duas subpartes. Os **Dados Inicializados** contêm valores pré-definidos e específicos que são usados pelo programa. Os *dados Não-Inicializados (Heap) são espaços reservados para alocação dinâmica de memória durante a execução do programa.

A **Stack** situa-se na parte superior do espaço de endereços, a stack é utilizada para armazenar informações temporárias, como variáveis locais e informações de controle de chamadas de funções.

---

### Descritores do processo
Os descritores de ficheiros (file descriptors) são fundamentais para a interação entre processos e o sistema operativo.

1. **O que é um Descritor de Ficheiro?** Um descritor de ficheiro é uma representação a nível do kernel de um objeto tipo ficheiro. Este objeto pode ser um ficheiro regular, um pipe, um socket de rede, ou até mesmo um dispositivo de hardware. O descritor de ficheiro é um número inteiro que identifica unicamente um recurso aberto e permite ao processo realizar operações de leitura, escrita e manipulação desse recurso.

2. **Herança de Descritores de Ficheiro**
    - **Descritores de Ficheiro Padrão (Standard File Descriptors)**: Cada processo herda três descritores de ficheiro padrão: entrada padrão (standard input, stdin), saída padrão (standard output, stdout) e erro padrão (standard error, stderr).
        - **Entrada Padrão (stdin)**: Geralmente associado ao teclado, permite ao processo receber dados.
        - **Saída Padrão (stdout)**: Normalmente associado ao ecrã, permite ao processo enviar dados.
        - **Erro Padrão (stderr)**: Usado para saída de mensagens de erro, também geralmente associado ao ecrã.
    
    - **Herança de Todos os Descritores de Ficheiro Abertos**: Quando um processo cria um novo processo (processo filho), este novo processo herda todos os descritores de ficheiro abertos pelo processo pai no momento da criação. Isto significa que o processo filho pode continuar a usar esses descritores de ficheiro para interagir com os mesmos recursos que o processo pai.

3. **Benefícios da Herança de Descritores de Ficheiro**
    - **Eficiência**: Permite a comunicação entre processos e a continuidade do trabalho sem a necessidade de reabrir ficheiros ou outros recursos.
    - **Facilidade de Implementação**: Facilita a implementação de pipelines e outras formas de comunicação interprocessos (IPC).
    **Flexibilidade**: Permite que processos filhos executem tarefas específicas com os mesmos recursos do processo pai, como redirecionar a saída de um comando para um ficheiro ou outro programa.

---

### Criação de Processos

1. **Processos São Criados por Clonagem**: Em sistemas Unix-like, os processos são frequentemente criados através da clonagem de um processo existente usando a chamada de sistema fork. Este processo de clonagem cria uma cópia quase idêntica do processo original (processo pai).

2. **Cópia do Espaço de Endereços (Lazy Copy)**: Quando um processo é clonado, o espaço de endereços é copiado de maneira "preguiçosa" (lazy copy). Isto significa que o sistema operativo inicialmente não duplica toda a memória física; em vez disso, ele usa a técnica de copy-on-write. Apenas quando o processo filho ou pai tenta modificar uma página de memória é que uma cópia real dessa página é feita.

3. **Descritores de Ficheiro Abertos São Herdados**: Todos os descritores de ficheiro abertos pelo processo pai são herdados pelo processo filho. Isto permite que o processo filho tenha acesso aos mesmos recursos que o processo pai, como ficheiros, sockets e pipes.

---

### Execução de Processos

1. **Programas São Executados**: Após a criação do processo, um programa pode ser carregado para execução no espaço de endereços do processo. Isto é frequentemente feito com a chamada de sistema exec, que carrega um novo programa no espaço de endereços do processo existente.

2. **Substituição do Espaço de Endereços pelo Conteúdo de um Ficheiro Executável (ABI)**: Quando exec é chamado, o espaço de endereços do processo é substituído pelo conteúdo de um ficheiro executável. Este ficheiro é carregado de acordo com a Interface Binária da Aplicação (Application Binary Interface, ABI) do sistema, que define como os binários são estruturados e executados.

3. **Descritores de Ficheiro Abertos São Preservados**: Apesar da substituição do espaço de endereços, os descritores de ficheiro abertos são preservados. Isto significa que, após a execução do novo programa, o processo mantém os mesmos descritores de ficheiro abertos que herdou ou abriu antes da chamada exec.

---

### Comunicação Interprocessos (IPC)
A Comunicação Interprocessos (IPC) é essencial para a coordenação e troca de dados entre processos. Vários métodos podem ser usados para IPC, cada um com suas próprias características e usos específicos.

1. **Ficheiros (Files)**
    - **Descrição**: Os processos podem comunicar-se através de ficheiros, onde um processo escreve dados num ficheiro e outro processo lê esses dados.
    - **Usos**: Este método é simples e útil para armazenamento e comunicação de dados persistentes.
    - **Vantagens**: Fácil de implementar e utilizar.
    - **Desvantagens**: Menor eficiência e maior latência devido ao acesso ao sistema de ficheiros.

2. **IPC Tradicional/Memória Partilhada (Shared Memory)**
    - **Descrição**: Dois ou mais processos podem acessar uma área de memória comum. Isto permite uma comunicação extremamente rápida, pois os dados não precisam ser copiados entre processos.
    - **Usos**: Aplicações que requerem troca rápida de grandes quantidades de dados.
    - **Vantagens**: Alta eficiência e baixa latência.
    - **Desvantagens**: Complexidade na sincronização e gestão da concorrência.

3. **Filas de Mensagens (Message Queues)**
    - **Descrição**: Permitem a troca de mensagens entre processos através de uma fila gerida pelo kernel.
    **Usos**: Comunicação assíncrona onde a ordem das mensagens é importante.
    **Vantagens**: Simplicidade na comunicação e capacidade de priorização de mensagens.
    **Desvantagens**: Pode ter limitações de tamanho e latência comparada à memória partilhada.

4. **Semáforos (Semaphores)**
    - **Descrição**: Utilizados para controlar o acesso a recursos partilhados, sincronizando processos.
    - **Usos**: Sincronização e prevenção de condições de corrida (race conditions).
    - **Vantagens**: Eficaz na gestão de acesso concorrente.
    - **Desvantagens**: Pode ser complexo de implementar corretamente e propenso a deadlocks.

5. **Pipes (Nominais ou Não Nominais)**
    - **Descrição**: Pipes são canais de comunicação unidirecionais usados para conectar processos. Pipes não nominais (anónimos) existem apenas enquanto os processos pai e filho estão em execução, enquanto pipes nominais (nomeados) são identificados por um nome no sistema de ficheiros e podem ser usados por processos não relacionados.
    - **Usos**: Comunicação entre processos que têm uma relação hierárquica (pai-filho) ou qualquer processo (nominais).
    - **Vantagens**: Simples de usar e implementar.
    - **Desvantagens**: Limitados a comunicação unidirecional e ao mesmo sistema.

6. **Sockets (Domínios Locais ou de Rede)**
    - **Descrição**: Sockets permitem comunicação bidirecional entre processos, tanto no mesmo sistema (sockets locais) quanto em sistemas diferentes através de uma rede (sockets de rede).
    - **Usos**: Aplicações de rede e comunicação entre processos em sistemas diferentes.
    - **Vantagens**: Flexibilidade e capacidade de comunicação através de redes.
    - **Desvantagens**: Complexidade maior em comparação com pipes e outros métodos IPC.


---
###  Permissões e Modos de Ficheiros e Diretórias Unix
As permissões e modos de ficheiros e diretoria Unix são aspetos fundamentais dos sistemas operativos do tipo Unix, definindo os mecanismos de controlo de acesso para ficheiros e diretoria. Estas permissões determinam quem pode **ler**, **escrever** ou **executar** um ficheiro ou diretoria.

1. **Conformidade com POSIX**
   POSIX (Portable Operating System Interface) é uma família de normas especificadas pelo IEEE para manter a compatibilidade entre sistemas operativos. POSIX 1:2008, também conhecida como Especificação Única Unix (SUS) V4, inclui diretrizes abrangentes para permissões de ficheiros e diretorias.

2. **Tipos de Permissões**
   Cada ficheiro e diretoria tem um conjunto de permissões para três tipos de utilizadores:
   - **Proprietário (Utilizador)**: O criador do ficheiro ou diretoria.
   - **Grupo**: Um conjunto de utilizadores que partilham determinadas permissões.
   - **Outros (Mundo)**: Todos os outros utilizadores.

   As permissões são representadas em três conjuntos de três caracteres, por exemplo, rwxr-xr--.
   - **r**: Permissão de leitura
   - **w**: Permissão de escrita
   - **x**: Permissão de execução

   Permissões de **Ficheiros**:
   - **r**: Permite visualizar o conteúdo de um ficheiro.
   - **w**: Permite modificar o conteúdo de um ficheiro.
   - **x**: Permite executar o ficheiro como um programa.

   Permissões de **Diretorias**:
   - **r**: Permite listar o conteúdo do diretório.
   - **w**: Permite criar, apagar ou renomear ficheiros dentro do diretório.
   - **x**: Permite aceder (entrar) no diretório.

   As permissões também podem ser representadas numericamente usando notação octal:
   ~~~
   r = 4
   w = 2
   x = 1
   ~~~
   Por exemplo:
   - rwxr-xr-- traduz-se para 755.
   - rw-r--r-- traduz-se para 644.

3. **Modos Especiais**
   POSIX também define bits de permissão especiais.
   - **Set User ID (setuid, s)**: Executa o ficheiro com as permissões do proprietário do ficheiro.
   - **Set Group ID (setgid, s)**: Executa o ficheiro com as permissões do grupo do ficheiro.
   - **Sticky Bit (t)**:  Usado em diretorias para restringir a eliminação de ficheiros apenas ao proprietário do ficheiro.

4. **Gestão na Linha de Comandos**
   As permissões podem ser modificadas usando o comando chmod (change mode):
   - Método simbólico: **chmod u+x ficheiro** (adiciona permissão de execução para o proprietário).
   - Método numérico: **chmod 755 ficheiro** (define as permissões para rwxr-xr-x).

   Para mudar o proprietário ou grupo de um ficheiro, são usados os comandos chown e chgrp:
   - chown utilizador ficheiro
   - chgrp grupo ficheiro

   

